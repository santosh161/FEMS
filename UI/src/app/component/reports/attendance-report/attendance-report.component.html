<div class="container-fluid mt-4 attendance-report">

  

  <!-- Filter Section -->
  <div class="card shadow-sm mb-4">
     <div class="card-body">
    <form class="row g-3 align-items-end">
      <!-- From Date -->
      <div class="col-6 col-md-3">
        <label class="form-label fw-semibold">From Date</label>
        <div class="input-group">
          <input class="form-control"
                 placeholder="yyyy-mm-dd"
                 name="fromDate"
                 ngbDatepicker
                 #d1="ngbDatepicker"
                 [(ngModel)]="fromDate">
          <button class="btn btn-outline-secondary" (click)="d1.toggle()" type="button">ðŸ“…</button>
        </div>
      </div>

      <!-- To Date -->
      <div class="col-6 col-md-3">
        <label class="form-label fw-semibold">To Date</label>
        <div class="input-group">
          <input class="form-control"
                 placeholder="yyyy-mm-dd"
                 name="toDate"
                 ngbDatepicker
                 #d2="ngbDatepicker"
                 [(ngModel)]="toDate">
          <button class="btn btn-outline-secondary" (click)="d2.toggle()" type="button">ðŸ“…</button>
        </div>
      </div>

      <!-- Employee Code -->
      <div class="col-6 col-md-3">
        <label class="form-label fw-semibold">Employee Code (Optional)</label>
        <input type="text"
               class="form-control"
               [(ngModel)]="employeeCode"
               placeholder="E101">
      </div>

      <!-- Actions -->
      <div class="col-6 col-md-3 d-flex gap-2">
        <button class="btn btn-primary flex-fill" (click)="fetchReport()">Get Report</button>
        <!-- Uncomment for PDF download -->
        <button class="btn btn-outline-success flex-fill" (click)="downloadReportPdf()">â¬‡ PDF</button>
      </div>
    </form>
  </div>

  <!-- Attendance Table -->
 <div class="table-responsive attendance-table shadow-sm rounded">
  <table class="table table-bordered table-sm align-middle text-center mb-0">
    <thead class="table-primary">
      <tr>
        <th class="sticky-col-1">Sr. No.</th>
        <th class="sticky-col-2">Employee Name</th>
        <th *ngFor="let day of [].constructor(daysInMonth); let i=index">{{ i+1 }}</th>
        <th>Absent</th>
        <th>Present</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let emp of reportData; let i=index">
        <td class="sticky-col-1">{{ i+1 }}</td>
        <td class="sticky-col-2 text-start">{{ emp.employeeName }}</td>
        <td *ngFor="let day of emp.days"
            [ngClass]="{
              'present': day === 'P',
              'absent': day === 'A',
              'halfday': day === 'H',
              'NotMarked': day === 'NA'
            }">
          {{ day }}
        </td>
        <td class="fw-bold text-danger">{{ emp.absentCount }}</td>
        <td class="fw-bold text-success">{{ emp.presentCount }}</td>
      </tr>
    </tbody>
  </table>
</div>

</div>
